{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = validate;\nexports.validateChild = validateChild;\nexports.validateField = validateField;\n\nvar _definitions = require(\"../definitions\");\n\nfunction validate(node, key, val) {\n  if (!node) return;\n  const fields = _definitions.NODE_FIELDS[node.type];\n  if (!fields) return;\n  const field = fields[key];\n  validateField(node, key, val, field);\n  validateChild(node, key, val);\n}\n\nfunction validateField(node, key, val, field) {\n  if (!(field != null && field.validate)) return;\n  if (field.optional && val == null) return;\n  field.validate(node, key, val);\n}\n\nfunction validateChild(node, key, val) {\n  if (val == null) return;\n  const validate = _definitions.NODE_PARENT_VALIDATIONS[val.type];\n  if (!validate) return;\n  validate(node, key, val);\n}","map":{"version":3,"mappings":";;;;;;;;;AAAA;;AAOe,SAASA,QAAT,CACbC,IADa,EAEbC,GAFa,EAGbC,GAHa,EAIP;EACN,IAAI,CAACF,IAAL,EAAW;EAEX,MAAMG,MAAM,GAAGC,yBAAYJ,IAAI,CAACK,IAAjBD,CAAf;EACA,IAAI,CAACD,MAAL,EAAa;EAEb,MAAMG,KAAK,GAAGH,MAAM,CAACF,GAAD,CAApB;EACAM,aAAa,CAACP,IAAD,EAAOC,GAAP,EAAYC,GAAZ,EAAiBI,KAAjB,CAAbC;EACAC,aAAa,CAACR,IAAD,EAAOC,GAAP,EAAYC,GAAZ,CAAbM;AACD;;AAEM,SAASD,aAAT,CACLP,IADK,EAELC,GAFK,EAGLC,GAHK,EAILI,KAJK,EAKC;EACN,IAAI,EAACA,KAAD,QAACA,SAAK,CAAEP,QAAR,CAAJ,EAAsB;EACtB,IAAIO,KAAK,CAACG,QAANH,IAAkBJ,GAAG,IAAI,IAA7B,EAAmC;EAEnCI,KAAK,CAACP,QAANO,CAAeN,IAAfM,EAAqBL,GAArBK,EAA0BJ,GAA1BI;AACD;;AAEM,SAASE,aAAT,CACLR,IADK,EAELC,GAFK,EAGLC,GAHK,EAIL;EACA,IAAIA,GAAG,IAAI,IAAX,EAAiB;EACjB,MAAMH,QAAQ,GAAGW,qCAAwBR,GAAG,CAACG,IAA5BK,CAAjB;EACA,IAAI,CAACX,QAAL,EAAe;EACfA,QAAQ,CAACC,IAAD,EAAOC,GAAP,EAAYC,GAAZ,CAARH;AACD","names":["validate","node","key","val","fields","NODE_FIELDS","type","field","validateField","validateChild","optional","NODE_PARENT_VALIDATIONS"],"sources":["../../src/validators/validate.ts"],"sourcesContent":["import {\n  NODE_FIELDS,\n  NODE_PARENT_VALIDATIONS,\n  type FieldOptions,\n} from \"../definitions\";\nimport type * as t from \"..\";\n\nexport default function validate(\n  node: t.Node | undefined | null,\n  key: string,\n  val: any,\n): void {\n  if (!node) return;\n\n  const fields = NODE_FIELDS[node.type];\n  if (!fields) return;\n\n  const field = fields[key];\n  validateField(node, key, val, field);\n  validateChild(node, key, val);\n}\n\nexport function validateField(\n  node: t.Node | undefined | null,\n  key: string,\n  val: any,\n  field: FieldOptions | undefined | null,\n): void {\n  if (!field?.validate) return;\n  if (field.optional && val == null) return;\n\n  field.validate(node, key, val);\n}\n\nexport function validateChild(\n  node: t.Node | undefined | null,\n  key: string,\n  val?: t.Node | undefined | null,\n) {\n  if (val == null) return;\n  const validate = NODE_PARENT_VALIDATIONS[val.type];\n  if (!validate) return;\n  validate(node, key, val);\n}\n"]},"metadata":{},"sourceType":"script"}